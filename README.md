# ãƒ¤ãƒ‰ãƒ³ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒšãƒƒãƒˆ ğŸ¦¦

tmux ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç›£è¦–ã—ã€tmux ãƒ•ãƒƒã‚¯ã¨é€£æºã—ã¦å¹ãå‡ºã—ã‚’è¡¨ç¤ºã™ã‚‹ãƒ¤ãƒ‰ãƒ³ï¼ˆSlowpokeï¼‰ã®ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒšãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚tmux ã«ã‚´ãƒªã‚´ãƒªä¾å­˜ã—ã¦ã„ã¾ã™ã€‚

## æ©Ÿèƒ½

- **ãƒ”ã‚¯ã‚»ãƒ«ã‚¢ãƒ¼ãƒˆã®ãƒ¤ãƒ‰ãƒ³**: 16x16ãƒ”ã‚¯ã‚»ãƒ«ã‚¢ãƒ¼ãƒˆã§é¡”ãŒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **tmuxé€£æº**: tmux ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç›£è¦–ã—ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³åã‚’è¡¨ç¤º
- **ãƒ•ãƒƒã‚¯å¯¾å¿œ**: tmux ã®ãƒ•ãƒƒã‚¯ã«åå¿œã—ã¦å¹ãå‡ºã—ã‚’è¡¨ç¤º
- **è‡ªå‹•èµ·å‹•**: ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•æ™‚ã«è‡ªå‹•çš„ã«èµ·å‹•å¯èƒ½ï¼ˆmacOSï¼‰
- **è¤‡æ•°ãƒ¤ãƒ‰ãƒ³å¯¾å¿œ**: è¤‡æ•°ã® tmux ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«å¯¾ã—ã¦è¤‡æ•°ã®ãƒ¤ãƒ‰ãƒ³ã‚’ç”Ÿæˆ
- **ã‚¹ãƒãƒ¼ãƒˆå¹ãå‡ºã—**: ãƒã‚±ãƒ¢ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ãŒç”»é¢ç«¯ã§è‡ªå‹•èª¿æ•´

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### å‰ææ¡ä»¶

```bash
# Python 3ã¨PyQt6ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install PyQt6
# tmux ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆHomebrew ä¾‹ï¼‰
brew install tmux
```

### ã‚¯ã‚¤ãƒƒã‚¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆmacOSï¼‰

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/yida/yadon-desktop-pet.git
cd yadon-desktop-pet

# è‡ªå‹•èµ·å‹•ç”¨ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
./install.sh
```

### æ‰‹å‹•å®Ÿè¡Œ

```bash
python3 yadon_pet.py
```

## tmux ãƒ•ãƒƒã‚¯çµ±åˆ

### tmux ã§ãƒ•ãƒƒã‚¯ã‚’è¨­å®š

`.tmux.conf` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼ˆãƒ‘ã‚¹ã¯ç’°å¢ƒã«åˆã‚ã›ã¦å¤‰æ›´ï¼‰ï¼š

```tmux
# ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆæ™‚ã«é€šçŸ¥
set-hook -g session-created  "run-shell '/path/to/yadon-desktop-pet/hook_notify.sh #{session_name}'"

# ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«é€šçŸ¥
set-hook -g session-closed   "run-shell '/path/to/yadon-desktop-pet/hook_stop.sh #{session_name}'"

# ãŠå¥½ã¿ã§ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä½œæˆã‚„ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¤‰æ›´ã«ã‚‚é€šçŸ¥
# set-hook -g window-created   "run-shell '/path/to/yadon-desktop-pet/hook_notify.sh #{session_name}'"
# set-hook -g client-session-changed "run-shell '/path/to/yadon-desktop-pet/hook_notify.sh #{session_name}'"
```

`hook_notify.sh` / `hook_stop.sh` ã¯å¼•æ•°ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³åã‚’ä½¿ã£ã¦ `/tmp/tmux_hook_{session}.txt` ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ›¸ãè¾¼ã¿ã¾ã™ã€‚

### åˆ©ç”¨å¯èƒ½ãªãƒ•ãƒƒã‚¯

- **Stopãƒ•ãƒƒã‚¯** (`hook_stop.sh`): ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«ã€Œã²ã¨ã‚„ã™ã¿ã™ã‚‹ã‚„ãã‚“ã€ã‚’è¡¨ç¤º
- **Notificationãƒ•ãƒƒã‚¯** (`hook_notify.sh`): å„ç¨®ã‚¤ãƒ™ãƒ³ãƒˆæ™‚ã«ã€Œã³ã³ã£ã¨ããŸã‚„ãã‚“ã€ã‚’è¡¨ç¤º

### ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

ãƒ•ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€ã“ã¨ã§ãƒ¤ãƒ‰ãƒ³ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã§ãã¾ã™ï¼š

```bash
# {SESSION} ã‚’å¯¾è±¡ tmux ã‚»ãƒƒã‚·ãƒ§ãƒ³åï¼ˆãƒ¤ãƒ‰ãƒ³ã®ä¸‹ã«è¡¨ç¤ºï¼‰ã«ç½®ãæ›ãˆ
echo "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸" > /tmp/yadon_hook_{SESSION}.txt

# ã¾ãŸã¯æ±ç”¨ãƒ•ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ï¼ˆæœ€åˆã®ãƒ¤ãƒ‰ãƒ³ãŒå¿œç­”ï¼‰
echo "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸" > /tmp/yadon_hook.txt
```

tmux å°‚ç”¨ã®ãƒ•ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚åˆ©ç”¨ã§ãã¾ã™ï¼š

```bash
echo "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸" > /tmp/tmux_hook_{SESSION}.txt
echo "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸" > /tmp/tmux_hook.txt
```

## è‡ªå‹•èµ·å‹•ç®¡ç†ï¼ˆmacOSï¼‰

### è‡ªå‹•èµ·å‹•ã‚’æœ‰åŠ¹åŒ–
```bash
./install.sh
```

### è‡ªå‹•èµ·å‹•ã‚’ç„¡åŠ¹åŒ–
```bash
launchctl unload ~/Library/LaunchAgents/com.yadon.pet.plist
```

### å®Œå…¨å‰Šé™¤
```bash
launchctl unload ~/Library/LaunchAgents/com.yadon.pet.plist
rm ~/Library/LaunchAgents/com.yadon.pet.plist
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

## ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°

- **ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°**: `/tmp/yadon-pet.log`
- **ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°**: `/tmp/yadon-pet-error.log`
- **ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°**: `/tmp/yadon_debug.log`
- **ãƒ•ãƒƒã‚¯ãƒ‡ãƒãƒƒã‚°**: `/tmp/hook_debug.log`
